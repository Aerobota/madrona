
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>madrona.features - Spatial Content Management of Features &mdash; Madrona Decision Support Framework v4.0b1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.0b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Madrona Decision Support Framework v4.0b1 documentation" href="index.html" />
    <link rel="up" title="Core Apps" href="apps.html" />
    <link rel="next" title="madrona.kmlapp - KML Representation of Features and Collections" href="kmlapp.html" />
    <link rel="prev" title="Core Apps" href="apps.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="kmlapp.html" title="madrona.kmlapp - KML Representation of Features and Collections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="apps.html" title="Core Apps"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Madrona Decision Support Framework v4.0b1 documentation</a> &raquo;</li>
          <li><a href="apps.html" accesskey="U">Core Apps</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="madrona-features-spatial-content-management-of-features">
<h1><tt class="docutils literal"><span class="pre">madrona.features</span></tt> -  Spatial Content Management of <em>Features</em><a class="headerlink" href="#madrona-features-spatial-content-management-of-features" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">madrona.features</span></tt> app works along with other Madrona apps to create a
system that is best described as a content management system for user-designed
spatial features. This system can be configured quickly to support a range of
management options such as marine protected areas, hydrokinetic generators,
wind turbines, or undersea cables. With one model definition it&#8217;s possible to
define the data schema for storing these features, as well as what behaviors
and actions they support within the Madrona interface. I high degree of
customization can be achieved with a Madrona project with this declarative
format, without having to customize the view or client-side javascript
components.</p>
<p>Feature Classes can be configured to:</p>
<blockquote>
<div><ul class="simple">
<li>Represent various management scenarios as Point, LineString or Polygon
data</li>
<li>Collect attributes from users using forms generated from the model
definition (or customized forms)</li>
<li>Pre-process and validate user-defined geometries with Manipulators</li>
<li>Enable sharing of features among users</li>
<li>Add custom downloads, like Shapefile or Excel files</li>
<li>Support custom editing actions</li>
</ul>
</div></blockquote>
<p>In addition, FeatureCollection Classes can be created that are collections of
Feature Class instances with their own attributes. These can be used to
represent simple Folders to help users organize their designs, or represent
management concepts such as Marine Protected Area Networks.</p>
<div class="section" id="creating-a-spatial-feature-class">
<h2>Creating a Spatial Feature Class<a class="headerlink" href="#creating-a-spatial-feature-class" title="Permalink to this headline">¶</a></h2>
<p>Lets walk through the basics of creating a simple Feature Class. The basic
process involves:</p>
<blockquote>
<div><ul class="simple">
<li>Defining a subclass of <tt class="docutils literal"><span class="pre">PointFeature</span></tt>, <tt class="docutils literal"><span class="pre">LineStringFeature</span></tt>,
<tt class="docutils literal"><span class="pre">PolygonFeature</span></tt>, including the attributes to be
stored with it.</li>
<li>Creating an Options inner-class, and using it to specify a form to use
when creating or editing this Feature Class.</li>
<li>Creating kml and kml_style properties that define it&#8217;s KML representation</li>
<li>Specifying links to downloads or services related to the Feature Class.</li>
<li>Specifying any optional parameters on the Options inner-class</li>
<li>Creating a template to use when displaying this Feature Class&#8217; attributes</li>
</ul>
</div></blockquote>
<p>Look at this example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">madrona.features</span> <span class="kn">import</span> <span class="n">register</span>
<span class="kn">from</span> <span class="nn">madrona.features.models</span> <span class="kn">import</span> <span class="n">PolygonFeature</span>
<span class="kn">from</span> <span class="nn">madrona.features.forms</span> <span class="kn">import</span> <span class="n">FeatureForm</span>

<span class="nd">@register</span>
<span class="k">class</span> <span class="nc">Mpa</span><span class="p">(</span><span class="n">PolygonFeature</span><span class="p">):</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="s">&quot;12&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Options</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s">&#39;Marine Protected Area&#39;</span>
        <span class="n">form</span> <span class="o">=</span> <span class="s">&#39;myproject.forms.MpaForm&#39;</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">alternate</span><span class="p">(</span><span class="s">&#39;Shapefile&#39;</span><span class="p">,</span>
                <span class="s">&#39;mlpa.views.shapefile&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single&#39;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="s">&#39;application/shapefile&#39;</span><span class="p">),</span>

            <span class="n">alternate</span><span class="p">(</span><span class="s">&#39;KMZ (Google Earth)&#39;</span><span class="p">,</span>
                <span class="s">&#39;mlpa.views.kml_export&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single multiple&#39;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="s">&#39;application/vnd.google-earth.kmz&#39;</span><span class="p">,</span>
                <span class="n">generic</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>

            <span class="n">related</span><span class="p">(</span><span class="s">&#39;MPA Spreadsheet&#39;</span><span class="p">,</span>
                <span class="s">&#39;mlpa.views.spreadsheet&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single&#39;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="s">&#39;application/excel&#39;</span><span class="p">),</span>

            <span class="n">edit</span><span class="p">(</span><span class="s">&#39;Delete w/Grids&#39;</span><span class="p">,</span>
                <span class="s">&#39;mlpa.views.delete_w_grids&#39;</span><span class="p">,</span>
                <span class="n">confirm</span><span class="o">=</span><span class="s">&quot;Are you sure you want to delete with grids?&quot;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&quot;single multiple&quot;</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">MpaArray</span><span class="p">],</span>
                <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;keyword_argument&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}),</span>

            <span class="n">edit_form</span><span class="p">(</span><span class="s">&#39;Tags&#39;</span><span class="p">,</span>
                <span class="s">&#39;mlpa.views.tag&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single multiple&#39;</span><span class="p">,</span>
                <span class="n">generic</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">models</span><span class="o">=</span><span class="p">(</span><span class="n">MpaArray</span><span class="p">,</span> <span class="n">MlpaMpa</span><span class="p">)),</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">MpaForm</span><span class="p">(</span><span class="n">FeatureForm</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Mpa</span>
</pre></div>
</div>
<div class="section" id="defining-the-model">
<h3>Defining the Model<a class="headerlink" href="#defining-the-model" title="Permalink to this headline">¶</a></h3>
<p>Must be a subclass of one of the <tt class="docutils literal"><span class="pre">Feature</span></tt> subclasses (<tt class="docutils literal"><span class="pre">PointFeature</span></tt>,
<tt class="docutils literal"><span class="pre">PolygonFeature</span></tt>, <tt class="docutils literal"><span class="pre">LineStringFeature</span></tt>)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>Keep the model name to under 30 characters in length</em>.
When creating a Feature model, django will automatically add permissions with a verbose name (e.g. &#8220;Can share Your Model Name&#8221;)
which must be &lt; 50 chars. Keeping the model name to around 30 chars or less will prevent SQL errors when creating the model.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>When creating a model for your unit tests, define the model outside of your TestCase class</em>.
Otherwise the feature class gets destroyed when the test finishes but it is never &#8216;unregistered&#8217;
which can lead to very difficult SQL/ORM debugging problems later in the tests.</p>
</div>
</div>
<div class="section" id="specifying-a-form">
<h3>Specifying a Form<a class="headerlink" href="#specifying-a-form" title="Permalink to this headline">¶</a></h3>
<p>All Feature Classes must have an <tt class="docutils literal"><span class="pre">Options</span></tt> inner-class that contains a
property specifying the <tt class="docutils literal"><span class="pre">FeatureForm</span></tt> subclass that can be used to edit it.
All <em class="xref std std-ref">other properties</em> on the Options inner-class
are optional.</p>
</div>
<div class="section" id="creating-a-show-template">
<h3>Creating a &#8220;Show&#8221; Template<a class="headerlink" href="#creating-a-show-template" title="Permalink to this headline">¶</a></h3>
<p>The show template is used to render sidebar content for a feature within the
Madrona interface, and can also be used to render a printable and
bookmarkable page for it. This template can be placed in any template
directory by default under <tt class="docutils literal"><span class="pre">{{slug}}/show.html</span></tt>. Subdirectories are used to
allow for overriding templates as mentioned in the
<a class="reference external" href="http://docs.djangoproject.com/en/1.2/ref/templates/api/#using-subdirectories">django documentation</a>.
The default path to the show template can be changed using an optional
<a class="reference internal" href="#show_template">show_template</a> parameter to the Options inner-class.</p>
<p>Templates will be rendered with the following context:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">instance</span></tt> - the feature class instance being being displayed</li>
</ul>
</div></blockquote>
<p>You can add to this list using the <a class="reference internal" href="#show_context">show_context</a> Option property.</p>
</div>
<div class="section" id="customizing-the-output-styling-and-kml-representation">
<h3>Customizing the Output Styling and KML Representation<a class="headerlink" href="#customizing-the-output-styling-and-kml-representation" title="Permalink to this headline">¶</a></h3>
<p>There are three primary visual representations of Features: KML, the KMLTree and static maps.
While the base Feature classes define reasonable default styling, it&#8217;s likely that you&#8217;ll need to customize the look and feel for your implementation.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="kmlapp.html#kmlapp"><em>Customizing the styling of the KML</em></a></li>
<li><a class="reference internal" href="staticmap.html#staticmap"><em>Customizing the Mapnik static map rendering</em></a></li>
</ul>
</div></blockquote>
<div class="section" id="customizing-the-styling-of-the-kmltree">
<h4>Customizing the styling of the KMLTree<a class="headerlink" href="#customizing-the-styling-of-the-kmltree" title="Permalink to this headline">¶</a></h4>
<p>You can use css to style the representation of the Features in the KMLTree, specifically the small icon to the left of the Feature name. There are two mechanisms to do this.</p>
<p>First you can specify an <tt class="docutils literal"><span class="pre">icon_url</span></tt> in the Options. This can be an absolute http URL or relative to the MEDIA_ROOT directory.</p>
<p>If you need more control over styling icons (such as specifying multiple styles or using scrolling sprites) you can use raw css by overriding the Feature.css() classmethod. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">css</span><span class="p">(</span><span class="n">klass</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    li.KmlDocument &gt; .icon {</span>
<span class="s">      background: url(&#39;</span><span class="si">%(media)s</span><span class="s">/sprites/kml.png?1302821411&#39;) no-repeat -566px 0px ! important;</span>
<span class="s">    }</span>
<span class="s">    li.</span><span class="si">%(uid)s</span><span class="s"> &gt; .icon {</span>
<span class="s">      background: url(&#39;</span><span class="si">%(media)s</span><span class="s">/sprites/kml.png?1302821411&#39;) no-repeat 0px 0px ! important;</span>
<span class="s">    }</span>
<span class="s">    &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">{</span> <span class="s">&#39;uid&#39;</span><span class="p">:</span> <span class="n">klass</span><span class="o">.</span><span class="n">model_uid</span><span class="p">(),</span> <span class="s">&#39;media&#39;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="beyond-the-basics">
<h3>Beyond the Basics<a class="headerlink" href="#beyond-the-basics" title="Permalink to this headline">¶</a></h3>
<div class="section" id="implementing-a-custom-copy-method">
<h4>Implementing a Custom Copy Method<a class="headerlink" href="#implementing-a-custom-copy-method" title="Permalink to this headline">¶</a></h4>
<p>Some default copying behavior is provided with the built-in feature.copy method. Unless you want to reimplement/change all that logic (and maybe your application requires it) you can call the Super() function and just override the necessary bits:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@register</span>
<span class="k">class</span> <span class="nc">Folder</span><span class="p">(</span><span class="n">FeatureCollection</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">copy</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Folder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="n">copy</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; (copy)&#39;</span><span class="p">,</span> <span class="s">&#39;-Copy&#39;</span><span class="p">)</span>
        <span class="n">copy</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">copy</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-manipulators">
<h4>Specifying Manipulators<a class="headerlink" href="#specifying-manipulators" title="Permalink to this headline">¶</a></h4>
<p>You must specify a list of required manipulators; if no manipulators are required simply pass an empty list <tt class="docutils literal"><span class="pre">[]</span></tt>. Optional manipulators can be specified as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@register</span>
<span class="k">class</span> <span class="nc">TestMpa</span><span class="p">(</span><span class="n">PolygonFeature</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">class</span> <span class="nc">Options</span><span class="p">:</span>
        <span class="n">manipulators</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;madrona.manipulators.tests.TestManipulator&#39;</span> <span class="p">]</span>
        <span class="n">optional_manipulators</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;madrona.manipulators.manipulators.ClipToGraticuleManipulator&#39;</span> <span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="base-classes">
<h2>Base Classes<a class="headerlink" href="#base-classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="feature">
<h3>Feature<a class="headerlink" href="#feature" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="madrona.features.models.Feature">
<em class="property">class </em><tt class="descname">Feature</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Model used for representing user-generated features</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">user</span></tt></td>
<td>Creator</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Name of the object</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_created</span></tt></td>
<td>When it was created</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_modified</span></tt></td>
<td>When it was last updated.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="madrona.features.models.Feature.add_to_collection">
<tt class="descname">add_to_collection</tt><big>(</big><em>collection</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.add_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Add feature to specified FeatureCollection</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.Feature.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.Feature.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.Feature.copy">
<tt class="descname">copy</tt><big>(</big><em>user=None</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of this feature, setting the user to the specified 
owner. Copies many-to-many relations</p>
</dd></dl>

<dl class="classmethod">
<dt id="madrona.features.models.Feature.css">
<em class="property">classmethod </em><tt class="descname">css</tt><big>(</big><em>klass</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.css" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the CSS for representing features in kmltree, specifically the icon
Works one of two ways:
1. Use the icon_url Option and this default css() classmethod 
2. Override the css() classmethod for more complex cases</p>
</dd></dl>

<dl class="classmethod">
<dt id="madrona.features.models.Feature.get_options">
<em class="property">classmethod </em><tt class="descname">get_options</tt><big>(</big><em>klass</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.get_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns model class Options object</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.Feature.hash">
<tt class="descname">hash</tt><a class="headerlink" href="#madrona.features.models.Feature.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>For caching. This string represents a hash of all 
attributes that may influence reporting results. 
i.e. if this property changes, reports for the feature get rerun.</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.Feature.is_viewable">
<tt class="descname">is_viewable</tt><big>(</big><em>user</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.is_viewable" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this feauture viewable by the specified user? 
Either needs to own it or have it shared with them.
returns : Viewable(boolean), HttpResponse</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.Feature.kml_safe">
<tt class="descname">kml_safe</tt><a class="headerlink" href="#madrona.features.models.Feature.kml_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>A safety valve for kmlapp...
If one feature&#8217;s .kml  property fails, 
it won&#8217;t bring down the entire request.
This property is never to be overridden!</p>
</dd></dl>

<dl class="classmethod">
<dt id="madrona.features.models.Feature.model_uid">
<em class="property">classmethod </em><tt class="descname">model_uid</tt><big>(</big><em>klass</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.model_uid" title="Permalink to this definition">¶</a></dt>
<dd><p>class method providing the uid for the model class.</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.Feature.remove_from_collection">
<tt class="descname">remove_from_collection</tt><big>(</big><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.remove_from_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove feature from FeatureCollection</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.Feature.share_with">
<tt class="descname">share_with</tt><big>(</big><em>groups</em>, <em>append=False</em><big>)</big><a class="headerlink" href="#madrona.features.models.Feature.share_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Share this feature with the specified group/groups.
Owner must be a member of the group/groups.
Group must have &#8216;can_share&#8217; permissions else an Exception is raised</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.Feature.uid">
<tt class="descname">uid</tt><a class="headerlink" href="#madrona.features.models.Feature.uid" title="Permalink to this definition">¶</a></dt>
<dd><p>Unique identifier for this feature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spatial-feature">
<h3>Spatial Feature<a class="headerlink" href="#spatial-feature" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="madrona.features.models.SpatialFeature">
<em class="property">class </em><tt class="descname">SpatialFeature</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.SpatialFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract Model used for representing user-generated geometry features. 
Inherits from Feature and adds geometry-related methods/properties
common to all geometry types.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">user</span></tt></td>
<td>Creator</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Name of the object</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_created</span></tt></td>
<td>When it was created</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_modified</span></tt></td>
<td>When it was last updated.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">manipulators</span></tt></td>
<td>List of manipulators to be applied when geom
is saved.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="attribute">
<dt id="madrona.features.models.SpatialFeature.active_manipulators">
<tt class="descname">active_manipulators</tt><a class="headerlink" href="#madrona.features.models.SpatialFeature.active_manipulators" title="Permalink to this definition">¶</a></dt>
<dd><p>This method contains all the logic to determine which manipulators get applied to a feature</p>
<dl class="docutils">
<dt>If self.manipulators doesnt exist or is null or blank, </dt>
<dd>apply the required manipulators (or the NullManipulator if none are required)</dd>
<dt>If there is a self.manipulators string and there are optional manipulators contained in it,</dt>
<dd>apply the required manipulators PLUS the specified optional manipulators</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.SpatialFeature.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.SpatialFeature.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.SpatialFeature.geom_kml">
<tt class="descname">geom_kml</tt><a class="headerlink" href="#madrona.features.models.SpatialFeature.geom_kml" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic KML representation of the feature geometry</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.SpatialFeature.kml">
<tt class="descname">kml</tt><a class="headerlink" href="#madrona.features.models.SpatialFeature.kml" title="Permalink to this definition">¶</a></dt>
<dd><p>Fully-styled KML placemark representation of the feature.
The Feature&#8217;s kml property MUST</p>
<blockquote>
<div><ul class="simple">
<li>return a string containing a valid KML placemark element</li>
<li>the placemark must have id= [the feature&#8217;s uid]</li>
<li>if it references any style URLs, the corresponding Style element(s)
must be provided by the feature&#8217;s .kml_style property</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.SpatialFeature.kml_style">
<tt class="descname">kml_style</tt><a class="headerlink" href="#madrona.features.models.SpatialFeature.kml_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return a string with one or more KML Style elements
whose id&#8217;s may be referenced by relative URL
from within the feature&#8217;s .kml string
In any given KML document, each <em>unique</em> kml_style string will get included 
so don&#8217;t worry if you have 10 million features with &#8220;blah-default&#8221; style...
only one will appear in the final document and all the placemarks can refer
to it. BEST TO TREAT THIS LIKE A CLASS METHOD - no instance specific vars.</p>
</dd></dl>

<dl class="classmethod">
<dt id="madrona.features.models.SpatialFeature.mapnik_style">
<em class="property">classmethod </em><tt class="descname">mapnik_style</tt><big>(</big><big>)</big><a class="headerlink" href="#madrona.features.models.SpatialFeature.mapnik_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapnik style object containing rules for symbolizing features in staticmap</p>
</dd></dl>

</dd></dl>

<div class="section" id="pointfeature">
<h4>PointFeature<a class="headerlink" href="#pointfeature" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="madrona.features.models.PointFeature">
<em class="property">class </em><tt class="descname">PointFeature</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.PointFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Model used for representing user-generated point features. Inherits from SpatialFeature.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">user</span></tt></td>
<td>Creator</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Name of the object</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_created</span></tt></td>
<td>When it was created</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_modified</span></tt></td>
<td>When it was last updated.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">manipulators</span></tt></td>
<td>List of manipulators to be applied when geom
is saved.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_original</span></tt></td>
<td>Original geometry as input by the user.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_final</span></tt></td>
<td>Geometry after manipulators are applied.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="attribute">
<dt id="madrona.features.models.PointFeature.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.PointFeature.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="linestringfeature">
<h4>LineStringFeature<a class="headerlink" href="#linestringfeature" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="madrona.features.models.LineFeature">
<em class="property">class </em><tt class="descname">LineFeature</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.LineFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Model used for representing user-generated linestring features. Inherits from SpatialFeature.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">user</span></tt></td>
<td>Creator</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Name of the object</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_created</span></tt></td>
<td>When it was created</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_modified</span></tt></td>
<td>When it was last updated.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">manipulators</span></tt></td>
<td>List of manipulators to be applied when geom
is saved.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_original</span></tt></td>
<td>Original geometry as input by the user.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_final</span></tt></td>
<td>Geometry after manipulators are applied.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="attribute">
<dt id="madrona.features.models.LineFeature.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.LineFeature.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="polygonfeature">
<h4>PolygonFeature<a class="headerlink" href="#polygonfeature" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="madrona.features.models.PolygonFeature">
<em class="property">class </em><tt class="descname">PolygonFeature</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.PolygonFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Model used for representing user-generated polygon features. Inherits from SpatialFeature.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">user</span></tt></td>
<td>Creator</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Name of the object</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_created</span></tt></td>
<td>When it was created</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">date_modified</span></tt></td>
<td>When it was last updated.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">manipulators</span></tt></td>
<td>List of manipulators to be applied when geom
is saved.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_original</span></tt></td>
<td>Original geometry as input by the user.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">geometry_final</span></tt></td>
<td>Geometry after manipulators are applied.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="attribute">
<dt id="madrona.features.models.PolygonFeature.centroid_kml">
<tt class="descname">centroid_kml</tt><a class="headerlink" href="#madrona.features.models.PolygonFeature.centroid_kml" title="Permalink to this definition">¶</a></dt>
<dd><p>KML geometry representation of the centroid of the polygon</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.PolygonFeature.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.PolygonFeature.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="featurecollection-base-class">
<h3>FeatureCollection Base Class<a class="headerlink" href="#featurecollection-base-class" title="Permalink to this headline">¶</a></h3>
<p>Subclasses of FeatureCollection have a one-to-many relationship with one or
more Feature Classes. One could create a Marine Protected Area Network class
that can only contain MPAs, or a Folder class that can contain any combination
of FeatureClasses or even other Folders and FeatureCollections.</p>
<p>One important note about the sharing behavior of FeatureCollections - If a user shares a
collection, all the features/collections contained within it are implicitly shared.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MPANetwork</span><span class="p">(</span><span class="n">FeatureCollection</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Options</span><span class="p">:</span>
        <span class="n">valid_children</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;mlpa.models.Mpa&#39;</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="madrona.features.models.FeatureCollection">
<em class="property">class </em><tt class="descname">FeatureCollection</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>A Folder/Collection of Features</p>
<dl class="method">
<dt id="madrona.features.models.FeatureCollection.add">
<tt class="descname">add</tt><big>(</big><em>f</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a specified Feature to the Collection</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.models.FeatureCollection.collection">
<tt class="descname">collection</tt><a class="headerlink" href="#madrona.features.models.FeatureCollection.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generic relation to any object through content-type/object-id
fields.</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.FeatureCollection.copy">
<tt class="descname">copy</tt><big>(</big><em>user=None</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of this feature collection, setting the user to the specified 
owner. Recursively copies all children.</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.FeatureCollection.delete">
<tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all features in the set</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.FeatureCollection.feature_set">
<tt class="descname">feature_set</tt><big>(</big><em>recurse=False</em>, <em>feature_classes=None</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection.feature_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of Features belonging to the Collection
Optionally recurse into all child containers
or limit/filter for a list of feature classes</p>
</dd></dl>

<dl class="method">
<dt id="madrona.features.models.FeatureCollection.remove">
<tt class="descname">remove</tt><big>(</big><em>f</em><big>)</big><a class="headerlink" href="#madrona.features.models.FeatureCollection.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a specified Feature from the Collection</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="the-options-inner-class">
<span id="feature-options"></span><h2>The Options inner-class<a class="headerlink" href="#the-options-inner-class" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="form">
<tt class="descname">form</tt><big>(</big><em>required</em><big>)</big><a class="headerlink" href="#form" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a <a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/forms/modelforms/">ModelForm</a>
that will be used to create and edit features of this class. The form
must be a subclass of madrona.features.forms.FeatureForm, and the path
to the form must be provided as a <em>string</em>. Otherwise you&#8217;ll cause
circular reference issues.</p>
</dd></dl>

<dl class="attribute">
<dt id="verbose_name">
<tt class="descname">verbose_name</tt><a class="headerlink" href="#verbose_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide your feature class with a human readable name to be used
within the interface. For example, this name determines the name used
in the &#8220;Create&#8221; menu. If not specified, the CamelCase model name will
be used. Even though it is optional, this property is obviously highly
recommended.</p>
</dd></dl>

<dl class="attribute">
<dt id="icon_url">
<tt class="descname">icon_url</tt><a class="headerlink" href="#icon_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the path to an icon image to represent the feature, both in the
menu and the tree view. Path can be an absolute http URL or relative
to the MEDIA_ROOT directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="show_template">
<tt class="descname">show_template</tt><a class="headerlink" href="#show_template" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, will look for the template at <tt class="docutils literal"><span class="pre">{{modelname}}/show.html</span></tt>
when rendering shape attributes. For example, the template for a model
named MpaArray  would be <tt class="docutils literal"><span class="pre">mpaarray/show.html</span></tt>. You can specify a
different template location with this option.</p>
</dd></dl>

<dl class="attribute">
<dt id="form_template">
<tt class="descname">form_template</tt><a class="headerlink" href="#form_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this option to specify a custom template to be shown when creating
or editing a feature. By default, looks for a template under
<tt class="docutils literal"><span class="pre">features/form.html</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="form_context">
<tt class="descname">form_context</tt><a class="headerlink" href="#form_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a base context to use for rendering templates when creating and
editing features.</p>
</dd></dl>

<dl class="attribute">
<dt id="show_context">
<tt class="descname">show_context</tt><a class="headerlink" href="#show_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a base context to use when rendering feature attributes.</p>
</dd></dl>

<dl class="attribute">
<dt id="copy">
<tt class="descname">copy</tt><a class="headerlink" href="#copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Enabled by default, set to False to disable copy functionality. Calls the
copy method of Feature, which can be overriden by subclasses to customize
this functionality.</p>
</dd></dl>

<dl class="attribute">
<dt id="manipulators">
<tt class="descname">manipulators</tt><a class="headerlink" href="#manipulators" title="Permalink to this definition">¶</a></dt>
<dd><p>Defaults to clipping features to the study region. Set to <tt class="docutils literal"><span class="pre">[]</span></tt> to
disable.</p>
</dd></dl>

<dl class="attribute">
<dt id="optional_manipulators">
<tt class="descname">optional_manipulators</tt><a class="headerlink" href="#optional_manipulators" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional list of manipulators that users can choose to apply to any digitized
features.</p>
</dd></dl>

<dl class="attribute">
<dt id="links">
<tt class="descname">links</tt><a class="headerlink" href="#links" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify links associated a Feature Class that point to related downloads,
export tools, and editing actions that can be performed.</p>
</dd></dl>

<dl class="attribute">
<dt id="export_png">
<tt class="descname">export_png</tt><a class="headerlink" href="#export_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify if the PNG link will be created for this Feature. Default is False.</p>
</dd></dl>

<div class="section" id="specifying-links">
<span id="feature-links"></span><h3>Specifying Links<a class="headerlink" href="#specifying-links" title="Permalink to this headline">¶</a></h3>
<p>Links allow developers to extend the functionality of features by specifying
downloads, actions, or related pages that should be made available through the
interface. There are 4 types of Links:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">alternate</span></tt> links specify alternative representations of features that
should be made available through the Export menu.</li>
<li><tt class="docutils literal"><span class="pre">related</span></tt> links specify related downloads or pages that are also made
available in the Export menu but in a downloads section.</li>
<li><tt class="docutils literal"><span class="pre">edit</span></tt> links specify items that should appear in the Edit menu and
modify a selected feature, create a copy, or some other
<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">non-idempotent</a>
action.</li>
</ul>
</div></blockquote>
<div class="section" id="default-links">
<span id="id1"></span><h4>Default links<a class="headerlink" href="#default-links" title="Permalink to this headline">¶</a></h4>
<p>There are several links that are provided by default specific for every feature:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">self</span></tt> links return html attributes</li>
<li><tt class="docutils literal"><span class="pre">edit</span></tt> links return html form for editing</li>
<li><tt class="docutils literal"><span class="pre">create</span></tt> links return html form for creating new feature</li>
</ul>
</div></blockquote>
<p>And several generic links that are, by default, applied to all feature types:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">Copy</span></tt> link creates a copy of the feature (see &#8220;Implementing A Custom Copy Method&#8221; for more)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Delete</span></tt> links removes the feature permanantly</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Share</span></tt> links get forms for group-based sharing of features</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">KML</span></tt> links return KML representation of the feature</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">KMZ</span></tt> links return zipped KML (ie KMZ) representation of the feature (see <tt class="docutils literal"><span class="pre">kmlapp</span></tt>)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">PNG</span></tt> links return a PNG image of the feature (see <tt class="docutils literal"><span class="pre">staticmap</span></tt>). Note that this feature can be turned off by specifying:</p>
<dl class="docutils">
<dt>class Options:</dt>
<dd><p class="first last">export_png = False</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>FeatureCollections also get</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">collection-add</span></tt> link to add feature(s) to this collection</li>
<li><tt class="docutils literal"><span class="pre">collection-remove</span></tt> link to remove feature(s) to this collection</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="custom-links">
<h4>Custom Links<a class="headerlink" href="#custom-links" title="Permalink to this headline">¶</a></h4>
<p>Here&#8217;s an example of custom links in use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@register</span>
<span class="k">class</span> <span class="nc">RenewableEnergySite</span><span class="p">(</span><span class="n">Feature</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">TYPE_CHOICES</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Options</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s">&#39;Renewable Energy Site&#39;</span>
        <span class="n">form</span> <span class="o">=</span> <span class="s">&#39;madrona.features.tests.RenewableEnergySiteForm&#39;</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">alternate</span><span class="p">(</span><span class="s">&#39;Export KML&#39;</span><span class="p">,</span>
                <span class="s">&#39;madrona.features.tests.kml&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;multiple single&#39;</span>
            <span class="p">),</span>
            <span class="n">related</span><span class="p">(</span><span class="s">&#39;Viewshed Map&#39;</span><span class="p">,</span>
                <span class="s">&#39;madrona.features.tests.viewshed_map&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single&#39;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="s">&#39;image/png&#39;</span>
            <span class="p">),</span>
            <span class="n">edit</span><span class="p">(</span><span class="s">&#39;Delete w/related cables&#39;</span><span class="p">,</span>
                <span class="s">&#39;madrona.features.tests.delete_w_cables&#39;</span><span class="p">,</span>
                <span class="n">select</span><span class="o">=</span><span class="s">&#39;single multiple&#39;</span><span class="p">,</span>
                <span class="n">confirm</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                Are you sure you want to delete this site and associated</span>
<span class="s">                undersea cables?</span>
<span class="s">                This action cannot be undone.</span>
<span class="s">                &quot;&quot;&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-compatible-views">
<h4>creating compatible views<a class="headerlink" href="#creating-compatible-views" title="Permalink to this headline">¶</a></h4>
<p>Views that are wired up to features using links must accept a second argument
named <tt class="docutils literal"><span class="pre">instance</span></tt> or <tt class="docutils literal"><span class="pre">instances</span></tt> depending on whether they can work on
single or multiple selected features.</p>
<p>The features app will handle requests</p>
<p>Generic views will handle cases where a user is not authorized to view or edit
a feature, requests related to features that cannot be found, and improperly
configured views.</p>
</div>
<div class="section" id="link-properties">
<h4>link properties<a class="headerlink" href="#link-properties" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="madrona.features.Link">
<em class="property">class </em><tt class="descname">Link</tt><big>(</big><em>rel</em>, <em>title</em>, <em>view</em>, <em>method='GET'</em>, <em>select='single'</em>, <em>type=None</em>, <em>slug=None</em>, <em>generic=False</em>, <em>models=None</em>, <em>extra_kwargs={}</em>, <em>confirm=False</em>, <em>edits_original=None</em>, <em>must_own=False</em>, <em>limit_to_groups=None</em><big>)</big><a class="headerlink" href="#madrona.features.Link" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="madrona.features.Link.can_user_view">
<tt class="descname">can_user_view</tt><big>(</big><em>user</em>, <em>is_owner</em><big>)</big><a class="headerlink" href="#madrona.features.Link.can_user_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True/False depending on whether user can view the link.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.confirm">
<tt class="descname">confirm</tt><a class="headerlink" href="#madrona.features.Link.confirm" title="Permalink to this definition">¶</a></dt>
<dd><p>Confirmation message to show the user before POSTing to rel=edit link</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.edits_original">
<tt class="descname">edits_original</tt><a class="headerlink" href="#madrona.features.Link.edits_original" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to false for editing links that create a copy of the original.
This will allow users who do not own the instance(s) but can view them
perform the action.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.extra_kwargs">
<tt class="descname">extra_kwargs</tt><a class="headerlink" href="#madrona.features.Link.extra_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra keyword arguments to pass to the view.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.generic">
<tt class="descname">generic</tt><a class="headerlink" href="#madrona.features.Link.generic" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this view can be applied to multiple feature classes.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.limit_to_groups">
<tt class="descname">limit_to_groups</tt><a class="headerlink" href="#madrona.features.Link.limit_to_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows you to specify groups (a list of group names)
that should have access to the link.
Default is None; i.e. All users have link access regardless of group membership</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.method">
<tt class="descname">method</tt><a class="headerlink" href="#madrona.features.Link.method" title="Permalink to this definition">¶</a></dt>
<dd><p>For rel=edit links, identifies whether a form should be requested or
that url should just be POST&#8217;ed to.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.models">
<tt class="descname">models</tt><a class="headerlink" href="#madrona.features.Link.models" title="Permalink to this definition">¶</a></dt>
<dd><p>List of feature classes that a this view can be applied to, if it is
generic.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.rel">
<tt class="descname">rel</tt><a class="headerlink" href="#madrona.features.Link.rel" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of link - alternate, related, edit, or edit_form.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.select">
<tt class="descname">select</tt><a class="headerlink" href="#madrona.features.Link.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether this link accepts requests with single or multiple
instances of a feature class. Valid values are &#8220;single&#8221;, &#8220;multiple&#8221;,
&#8220;single multiple&#8221;, and &#8220;multiple single&#8221;.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.slug">
<tt class="descname">slug</tt><a class="headerlink" href="#madrona.features.Link.slug" title="Permalink to this definition">¶</a></dt>
<dd><p>Part of this link&#8217;s path.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.title">
<tt class="descname">title</tt><a class="headerlink" href="#madrona.features.Link.title" title="Permalink to this definition">¶</a></dt>
<dd><p>Human-readable title for the link to be shown in the user interface.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.type">
<tt class="descname">type</tt><a class="headerlink" href="#madrona.features.Link.type" title="Permalink to this definition">¶</a></dt>
<dd><p>MIME type of this link, useful for alternate links. May in the future
be used to automatically assign an icon in the dropdown Export menu.</p>
</dd></dl>

<dl class="attribute">
<dt id="madrona.features.Link.view">
<tt class="descname">view</tt><a class="headerlink" href="#madrona.features.Link.view" title="Permalink to this definition">¶</a></dt>
<dd><p>View function handling requests to this link.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">madrona.features</span></tt> -  Spatial Content Management of <em>Features</em></a><ul>
<li><a class="reference internal" href="#creating-a-spatial-feature-class">Creating a Spatial Feature Class</a><ul>
<li><a class="reference internal" href="#defining-the-model">Defining the Model</a></li>
<li><a class="reference internal" href="#specifying-a-form">Specifying a Form</a></li>
<li><a class="reference internal" href="#creating-a-show-template">Creating a &#8220;Show&#8221; Template</a></li>
<li><a class="reference internal" href="#customizing-the-output-styling-and-kml-representation">Customizing the Output Styling and KML Representation</a><ul>
<li><a class="reference internal" href="#customizing-the-styling-of-the-kmltree">Customizing the styling of the KMLTree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beyond-the-basics">Beyond the Basics</a><ul>
<li><a class="reference internal" href="#implementing-a-custom-copy-method">Implementing a Custom Copy Method</a></li>
<li><a class="reference internal" href="#specifying-manipulators">Specifying Manipulators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#base-classes">Base Classes</a><ul>
<li><a class="reference internal" href="#feature">Feature</a></li>
<li><a class="reference internal" href="#spatial-feature">Spatial Feature</a><ul>
<li><a class="reference internal" href="#pointfeature">PointFeature</a></li>
<li><a class="reference internal" href="#linestringfeature">LineStringFeature</a></li>
<li><a class="reference internal" href="#polygonfeature">PolygonFeature</a></li>
</ul>
</li>
<li><a class="reference internal" href="#featurecollection-base-class">FeatureCollection Base Class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-options-inner-class">The Options inner-class</a><ul>
<li><a class="reference internal" href="#specifying-links">Specifying Links</a><ul>
<li><a class="reference internal" href="#default-links">Default links</a></li>
<li><a class="reference internal" href="#custom-links">Custom Links</a></li>
<li><a class="reference internal" href="#creating-compatible-views">creating compatible views</a></li>
<li><a class="reference internal" href="#link-properties">link properties</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="apps.html"
                        title="previous chapter">Core Apps</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="kmlapp.html"
                        title="next chapter"><tt class="docutils literal docutils literal"><span class="pre">madrona.kmlapp</span></tt> -  KML Representation of Features and Collections</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/features.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="kmlapp.html" title="madrona.kmlapp - KML Representation of Features and Collections"
             >next</a> |</li>
        <li class="right" >
          <a href="apps.html" title="Core Apps"
             >previous</a> |</li>
        <li><a href="index.html">Madrona Decision Support Framework v4.0b1 documentation</a> &raquo;</li>
          <li><a href="apps.html" >Core Apps</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, MarineMap Consortium, Ecotrust.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>